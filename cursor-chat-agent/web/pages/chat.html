<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Cursor IDE Chat - Chat View</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/web/main.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
  <div class="app-root">
    <header class="app-header">
      <span class="app-title">Cursor IDE Chat</span>
      <div class="header-switch">
        <button id="chatModeBtn" class="mode-btn active">Chat</button>
        <button id="codeModeBtn" class="mode-btn" onclick="window.location.href='/web/code.html'">Code Explorer</button>
      </div>
      <div class="status-indicator">
        <div class="status-dot"></div>
        <span id="status">Verbunden</span>
      </div>
      <div class="chat-header-actions">
        <button id="themeSwitcher" title="Theme wechseln">🌗</button>
        <button id="settingsBtn" title="Einstellungen">⚙️</button>
      </div>
    </header>
    
    <div class="main-layout">
      <aside class="sidebar" id="sidebar">
        <div id="sidebarContent">Sidebar</div>
      </aside>
      
      <main class="main-content" id="mainContent">
        <div id="chatView" class="chat-container">
          <!-- ChatComponent will render here -->
          <!-- Chat top, scrollable, bottom sticky input area -->
        </div>
      </main>
      
      <aside class="right-panel" id="rightPanel">
        <div id="rightPanelContent">
          <div id="rightPanelChatView">
            <div id="rightPanelMessages"></div>
            <div class="typing-indicator" id="rightPanelTypingIndicator">
              <div class="message-avatar">AI</div>
              <div class="message-bubble">
                <div class="typing-dots">
                  <div class="typing-dot"></div>
                  <div class="typing-dot"></div>
                  <div class="typing-dot"></div>
                </div>
              </div>
            </div>
            <div class="input-area">
              <div class="input-container">
                <button id="rightPanelFileUploadBtn" title="Datei hochladen">📎</button>
                <input type="file" id="rightPanelFileInput" style="display:none" />
                <textarea 
                  id="rightPanelMsgInput" 
                  placeholder="Nachricht eingeben..." 
                  autocomplete="off"
                  rows="1"
                ></textarea>
                <div class="button-group">
                  <button id="rightPanelSendBtn" class="btn btn-primary">
                    <span>Senden</span>
                  </button>
                  <button id="rightPanelDebugBtn" class="btn btn-secondary">
                    <span>Debug</span>
                  </button>
                </div>
              </div>
            </div>
          </div>
        </div>
      </aside>
    </div>
    
    <footer class="app-footer">(Statusbar/Terminal – optional)</footer>
  </div>

  <!-- Load the modular application -->
  <script type="module" src="/web/js/main.js"></script>
</body>
</html>
