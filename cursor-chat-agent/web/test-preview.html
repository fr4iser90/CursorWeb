<!DOCTYPE html>
<html lang="de">
<head>
  <meta charset="UTF-8">
  <title>Preview Component Test</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="/web/assets/css/main.css">
  <link rel="stylesheet" href="/web/assets/css/header.css">
  <link rel="stylesheet" href="/web/assets/css/chat.css">
  <link rel="stylesheet" href="/web/assets/css/sidebar.css">
  <link rel="stylesheet" href="/web/assets/css/rightpanel.css">
  <link rel="stylesheet" href="/web/assets/css/code.css">
  <link rel="stylesheet" href="/web/assets/css/preview.css">
  <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
  <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
</head>
<body>
  <div class="app-root">
    <header class="app-header">
      <span class="app-title">Preview Component Test</span>
      <div class="header-switch">
        <button id="chatModeBtn" class="mode-btn active">Chat</button>
        <button id="codeModeBtn" class="mode-btn">IDE</button>
      </div>
      <div class="layout-controls">
        <button id="splitViewBtn" class="layout-btn" title="Split View">
          <span class="btn-icon">‚äû</span>
        </button>
        <button id="previewBtn" class="layout-btn" title="Show Preview">
          <span class="btn-icon">üëÅÔ∏è</span>
        </button>
        <button id="fullScreenBtn" class="layout-btn" title="Full Screen">
          <span class="btn-icon">‚õ∂</span>
        </button>
      </div>
      <div class="status-indicator">
        <div class="status-dot"></div>
        <span id="status">Verbunden</span>
      </div>
      <div class="chat-header-actions">
        <button id="themeSwitcher" title="Theme wechseln">üåó</button>
        <button id="settingsBtn" title="Einstellungen">‚öôÔ∏è</button>
      </div>
    </header>
    
    <div class="main-layout">
      <!-- Chat Mode Layout -->
      <aside class="sidebar chat-sidebar" id="chatSidebar">
        <div id="chatSidebarContent">
          <h3>Chat Sidebar</h3>
          <p>This is the chat sidebar content.</p>
        </div>
      </aside>
      
      <!-- Code Mode Layout -->
      <aside class="sidebar code-sidebar" id="codeSidebar" style="display:none">
        <div id="codeSidebarContent">
          <h3>Code Sidebar</h3>
          <p>This is the code sidebar content.</p>
        </div>
      </aside>
      
      <main class="main-content" id="mainContent">
        <!-- Chat View -->
        <div id="chatView" class="chat-container">
          <div class="chat-header">
            <h2>Chat</h2>
          </div>
          <div class="messages-container">
            <div class="message user">
              <div class="message-avatar">üë§</div>
              <div class="message-bubble">
                <p>Hello! This is a test message from the user.</p>
              </div>
            </div>
            <div class="message ai">
              <div class="message-avatar">ü§ñ</div>
              <div class="message-bubble">
                <p>Hello! I'm the AI assistant. This is a test response.</p>
                <p>You can test the preview functionality by clicking the preview button in the header.</p>
              </div>
            </div>
          </div>
          <div class="input-area">
            <div class="input-container">
              <textarea id="msgInput" placeholder="Type your message..." rows="1"></textarea>
            </div>
            <div class="button-group">
              <button class="btn btn-primary" id="sendBtn">Send</button>
            </div>
          </div>
        </div>
        
        <!-- Preview View -->
        <div id="previewView" class="preview-container" style="display:none">
          <!-- PreviewComponent will render here -->
        </div>
        
        <!-- Code Explorer View -->
        <div id="codeExplorerView" style="display:none">
          <h3>Code Explorer</h3>
          <p>This is the code explorer view.</p>
        </div>
        
        <!-- IDE Mirror View - FULL SCREEN -->
        <div id="ideMirrorView" style="display:none">
          <div id="ideMirrorContainer">
            <div class="loading-message">
              <div class="loading-spinner"></div>
              <p>Connecting to IDE...</p>
            </div>
          </div>
        </div>
      </main>
      
      <!-- Chat Right Panel -->
      <aside class="right-panel chat-right-panel" id="chatRightPanel">
        <div id="chatRightPanelContent">
          <h3>Chat Right Panel</h3>
          <p>This is the chat right panel content.</p>
        </div>
      </aside>
      
      <!-- Code Right Panel -->
      <aside class="right-panel code-right-panel" id="codeRightPanel" style="display:none">
        <div id="codeRightPanelContent">
          <h3>Code Right Panel</h3>
          <p>This is the code right panel content.</p>
        </div>
      </aside>
    </div>
  </div>

  <!-- Test Script -->
  <script type="module">
    import PreviewComponent from './assets/js/presentation/components/PreviewComponent.js';
    
    // Initialize preview component
    const previewComponent = new PreviewComponent('previewView');
    
    // Layout control buttons
    const splitViewBtn = document.getElementById('splitViewBtn');
    const previewBtn = document.getElementById('previewBtn');
    const fullScreenBtn = document.getElementById('fullScreenBtn');
    const mainLayout = document.querySelector('.main-layout');
    
    let currentLayout = 'chat';
    
    // Split view toggle
    splitViewBtn.addEventListener('click', () => {
      if (currentLayout === 'split') {
        mainLayout.classList.remove('split-view');
        splitViewBtn.classList.remove('active');
        currentLayout = 'chat';
        previewComponent.hide();
      } else {
        mainLayout.classList.add('split-view');
        splitViewBtn.classList.add('active');
        currentLayout = 'split';
        previewComponent.show();
      }
    });
    
    // Preview toggle
    previewBtn.addEventListener('click', () => {
      if (currentLayout === 'preview') {
        previewBtn.classList.remove('active');
        currentLayout = 'chat';
        previewComponent.hide();
      } else {
        previewBtn.classList.add('active');
        currentLayout = 'preview';
        previewComponent.show();
      }
    });
    
    // Fullscreen toggle
    fullScreenBtn.addEventListener('click', () => {
      if (currentLayout === 'fullscreen') {
        fullScreenBtn.classList.remove('active');
        currentLayout = 'chat';
        previewComponent.hideFullScreen();
      } else {
        fullScreenBtn.classList.add('active');
        currentLayout = 'fullscreen';
        previewComponent.showFullScreen();
      }
    });
    
    // Mode switching
    const chatModeBtn = document.getElementById('chatModeBtn');
    const codeModeBtn = document.getElementById('codeModeBtn');
    const chatView = document.getElementById('chatView');
    const codeExplorerView = document.getElementById('codeExplorerView');
    const ideMirrorView = document.getElementById('ideMirrorView');
    const chatSidebar = document.getElementById('chatSidebar');
    const codeSidebar = document.getElementById('codeSidebar');
    const chatRightPanel = document.getElementById('chatRightPanel');
    const codeRightPanel = document.getElementById('codeRightPanel');
    
    chatModeBtn.addEventListener('click', () => {
      chatModeBtn.classList.add('active');
      codeModeBtn.classList.remove('active');
      chatView.style.display = '';
      codeExplorerView.style.display = 'none';
      ideMirrorView.style.display = 'none';
      chatSidebar.style.display = '';
      codeSidebar.style.display = 'none';
      chatRightPanel.style.display = '';
      codeRightPanel.style.display = 'none';
    });
    
    codeModeBtn.addEventListener('click', () => {
      codeModeBtn.classList.add('active');
      chatModeBtn.classList.remove('active');
      chatView.style.display = 'none';
      codeExplorerView.style.display = '';
      ideMirrorView.style.display = 'none';
      chatSidebar.style.display = 'none';
      codeSidebar.style.display = '';
      chatRightPanel.style.display = 'none';
      codeRightPanel.style.display = '';
    });
    
    // Theme switching
    const themeSwitcher = document.getElementById('themeSwitcher');
    themeSwitcher.addEventListener('click', () => {
      document.body.classList.toggle('light-theme');
    });
    
    // Demo content for preview
    const demoContent = `
      <div style="padding: 20px;">
        <h2>Preview Demo Content</h2>
        <p>This is a demonstration of the preview component functionality.</p>
        <div style="background: #f0f0f0; padding: 15px; border-radius: 8px; margin: 15px 0;">
          <h3>Features Demonstrated:</h3>
          <ul>
            <li>‚úÖ Split view layout</li>
            <li>‚úÖ Modal overlay</li>
            <li>‚úÖ Fullscreen mode</li>
            <li>‚úÖ Floating actions</li>
            <li>‚úÖ Responsive design</li>
            <li>‚úÖ Theme support</li>
          </ul>
        </div>
        <p>Try clicking the different layout control buttons in the header to see the various view modes.</p>
      </div>
    `;
    
    // Show demo content in preview
    previewComponent.setContent(demoContent);
    
    console.log('Preview Component Test initialized successfully!');
  </script>
</body>
</html> 